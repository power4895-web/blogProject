<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="kr.co.trgtech.trg02.repository.FileMapper">
	<insert id="insertFile" useGeneratedKeys="true" keyProperty="no">
	/** File.insertFile **/
	INSERT INTO tb_file(
		division
		, ref_key
		, file_path
		, sys_filename
		, org_filename
		, size
		, ext
		, create_dt
	)VALUES(
		 #{division}
		, #{refKey}
		, #{filePath}
		, #{sysFilename}
		, #{orgFilename}
		, #{size}
		, #{ext}
		, NOW()
	)
	</insert> 
	
	
	
	<select id="selectOneImageFile" resultType="kr.co.trgtech.trg02.dto.FileInfo">
	/** File.selectOneImageFile **/
	SELECT
		no
		, division
		, ref_key
		, file_path
		, sys_filename
		, org_filename
		, size
		, ext
		, create_dt
	FROM tb_file
	WHERE no = #{no} 
		and	ext In ('png', 'jpeg', 'jpg', 'gif', 'bmp')
	</select>
	
	<select id="selectFile" resultType="kr.co.trgtech.trg02.dto.FileInfo">
	/** File.selectFile **/
	SELECT
		no
		, division
		, ref_key
		, file_path
		, sys_filename
		, org_filename
		, size
		, ext
		, create_dt
	FROM tb_file
	WHERE no = #{no}
	</select>
	
	
	<select id="selectFileByLoginId" resultType="kr.co.trgtech.trg02.dto.FileInfo">
	/** File.selectFileByLoginId **/
	SELECT
		no
		, division
		, ref_key
		, file_path
		, sys_filename
		, org_filename
		, size
		, ext
		, create_dt
	FROM tb_file
	WHERE ref_key = #{refKey}
	AND division = #{division}
	</select>
	
	
	
</mapper>